# Use Ruby 2.7.8 as our base image.
FROM ruby:2.6.3-alpine

RUN gem update --system 3.3.22

# Install system dependencies.
# Adjust as needed; Node.js is often required for asset compilation.
RUN apk update && apk add --no-cache \
    build-base \
    nodejs \
    libffi-dev

# Install bundler if itâ€™s not already available.
RUN gem install bundler -v 2.0.2

# Create a working directory.
WORKDIR /srv/jekyll

# Copy Files
COPY . .

# Install Ruby dependencies as specified in the Gemfile.
RUN bundle install

# Expose the default Jekyll port.
EXPOSE 4000

# Run the Jekyll server with incremental builds and bind to all network interfaces.
CMD ["bundle", "exec", "jekyll", "serve", "--incremental", "--host", "0.0.0.0"]